<ion-header>
    <ion-toolbar color="primary">
        <ion-title>
            Поступления
        </ion-title>
    </ion-toolbar>
</ion-header>

<ion-content>
    <ion-refresher slot="fixed" (ionRefresh)="doRefresh($event)">
        <ion-refresher-content></ion-refresher-content>
    </ion-refresher>

    <div padding>
        <p *ngIf="currentData" class="info-date">Обновлено: {{ currentData[0].up_date }}</p>

        <ion-segment (ionChange)="changeMarketData()"
                     [(ngModel)]="filterPeriod"
                     mode="ios"
                     color="primary">
            <ion-segment-button mode="ios" value="day">
                <ion-label>За День</ion-label>
            </ion-segment-button>
            <ion-segment-button mode="ios" value="month">
                <ion-label>За Месяц</ion-label>
            </ion-segment-button>
        </ion-segment>
        <br>
        <ion-segment (ionChange)="changeMarketData()"
                     [(ngModel)]="marketParts"
                     mode="ios"
                     color="primary">
            <ion-segment-button mode="ios" value="0">
                <ion-label>Все</ion-label>
            </ion-segment-button>
            <ion-segment-button mode="ios" value="10">
                <ion-label>10</ion-label>
            </ion-segment-button>
            <ion-segment-button mode="ios" value="20">
                <ion-label>20</ion-label>
            </ion-segment-button>
            <ion-segment-button mode="ios" value="30">
                <ion-label>30</ion-label>
            </ion-segment-button>
            <ion-segment-button mode="ios" value="40">
                <ion-label>40</ion-label>
            </ion-segment-button>
            <ion-segment-button mode="ios" value="50">
                <ion-label>50</ion-label>
            </ion-segment-button>
            <ion-segment-button mode="ios" value="60">
                <ion-label>60</ion-label>
            </ion-segment-button>
            <ion-segment-button mode="ios" value="70">
                <ion-label>70</ion-label>
            </ion-segment-button>
            <ion-segment-button mode="ios" value="80">
                <ion-label>80</ion-label>
            </ion-segment-button>
            <ion-segment-button mode="ios" value="90">
                <ion-label>90</ion-label>
            </ion-segment-button>
            <ion-segment-button mode="ios" value="100">
                <ion-label>100</ion-label>
            </ion-segment-button>
        </ion-segment>
        <br>
        <div class="scroll-container">
            <ion-segment (ionChange)="updateFilteredDate()"
                         [(ngModel)]="filterDay"
                         mode="ios"
                         color="primary">
                <ng-container *ngIf="filterPeriod === 'day'">
                    <ion-segment-button *ngFor="let day of daysArr"
                                        mode="ios"
                                        [value]="day">
                        <ion-label class="border-bottom">{{ getWeekDay(day) }}</ion-label>
                        <ion-label>{{ day }}</ion-label>
                    </ion-segment-button>
                </ng-container>
                <ng-container *ngIf="filterPeriod === 'month'">
                    <ion-segment-button *ngFor="let day of daysArr"
                                        mode="ios"
                                        [value]="day">
                        <ion-label>{{ day }}</ion-label>
                    </ion-segment-button>
                </ng-container>
            </ion-segment>
        </div>
    </div>

<!--    <ion-list>-->
<!--        <ion-list-header>Фильтр</ion-list-header>-->
<!--                <ion-item>-->
<!--                    <ion-label>За месяц</ion-label>-->
<!--                    <ion-toggle [(ngModel)]="isMonth" (ionChange)="changeMarketData()"></ion-toggle>-->
<!--                </ion-item>-->
<!--        <ion-item>-->
<!--            <ion-label>Отдел</ion-label>-->
<!--            <ion-select [(ngModel)]="marketParts" (ionChange)="changeMarketData()" placeholder="Выберите отдел">-->
<!--                <ion-select-option value="0">Все отделы</ion-select-option>-->
<!--                <ion-select-option value="10">10</ion-select-option>-->
<!--                <ion-select-option value="20">20</ion-select-option>-->
<!--                <ion-select-option value="30">30</ion-select-option>-->
<!--                <ion-select-option value="40">40</ion-select-option>-->
<!--                <ion-select-option value="50">50</ion-select-option>-->
<!--                <ion-select-option value="60">60</ion-select-option>-->
<!--                <ion-select-option value="70">70</ion-select-option>-->
<!--                <ion-select-option value="80">80</ion-select-option>-->
<!--                <ion-select-option value="90">90</ion-select-option>-->
<!--                <ion-select-option value="100">100</ion-select-option>-->
<!--            </ion-select>-->
<!--        </ion-item>-->

<!--    </ion-list>-->

    <div class="data-table-wrap">
        <table class="data-table">
            <thead>
            <tr>
                <th>Маркет</th>
                <th>Факт, руб.</th>
                <th>Доля</th>
                <th>Б.н.</th>
                <th>% <br> вып-я</th>
                <th>с пр. <br> суб</th>
                <th>с пр. <br> годом</th>
            </tr>
            </thead>
            <tbody>
            <tr *ngFor="let item of filteredData">
                <td>{{ item.name }}</td>
                <td>{{ item.fact | number: '1.0-0':'ru' }}</td>
                <td>{{ item.dolya | percent:'1.0-1':'ru' }}</td>
                <td>{{ item.beznal | number: '1.0-0':'ru' }}</td>
                <td>{{ item.percent | percent:'1.0-1':'ru' }}</td>
                <td>{{ item.delta | percent:'1.0-1':'ru' }}</td>
                <td>{{ item.delta_year | percent:'1.0-1':'ru' }}</td>
            </tr>
            </tbody>
        </table>
    </div>

<!--    <ion-card *ngFor="let item of currentData">-->
<!--        <ion-card-header>-->
<!--            <ion-card-title>{{ item.name }}</ion-card-title>-->
<!--            <br>-->
<!--            <table class="custom-table">-->
<!--                <tr>-->
<!--                    <td>Факт:</td>-->
<!--                    <td>{{ item.fact | number: '1.0-0':'ru' }}</td>-->
<!--                </tr>-->
<!--                <tr>-->
<!--                    <td>Доля:</td>-->
<!--                    <td>{{ item.dolya | percent:'1.0-1':'ru' }}</td>-->
<!--                </tr>-->
<!--                <tr>-->
<!--                    <td>Безнал:</td>-->
<!--                    <td>{{ item.beznal | number: '1.0-0':'ru' }}</td>-->
<!--                </tr>-->
<!--                <tr>-->
<!--                    <td>% вып.:</td>-->
<!--                    <td>{{ item.percent | percent:'1.0-1':'ru' }}</td>-->
<!--                </tr>-->
<!--                <tr>-->
<!--                    <td>△ суб:</td>-->
<!--                    <td>{{ item.delta | percent:'1.0-1':'ru' }}</td>-->
<!--                </tr>-->
<!--                <tr>-->
<!--                    <td>△ год:</td>-->
<!--                    <td>{{ item.delta_year | percent:'1.0-1':'ru' }}</td>-->
<!--                </tr>-->
<!--            </table>-->
<!--            <br>-->
<!--            <ion-card-subtitle>Обновлено: {{ item.up_date }}</ion-card-subtitle>-->
<!--        </ion-card-header>-->
<!--    </ion-card>-->
</ion-content>
